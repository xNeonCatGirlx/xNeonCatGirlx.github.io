<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Synthwave Rain ✨</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Honk&family=Rajdhani:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="./style.css">
  <style>
    .walls {
      height: 100vh;
      width: 100vw;
      position: relative;
      overflow: hidden;
      display: flex;
      justify-content: space-between;
      padding: 0 10vw; 
      box-sizing: border-box;
    }
    .fade-out {
      opacity: 1;
      transition: opacity 2s ease;
    }
    .fade-out.fading {
      opacity: 0;
    }

    .side-wall {
      width: 25vw;  
      height: 100vh;
      overflow: hidden;
      position: relative;
      perspective: 800px;
    }
  </style>
</head>
<body>
  <div class="walls">
    <div class="side-wall left-wall"></div>
    <div class="side-wall right-wall"></div>
  </div>

  <script>
    const kanas = ['ﾆ','ﾜ','ﾒ','ｼ','ｻ','ﾘ','ｳ','ﾗ','ｵ','ｴ','ｱ','ｾ','ﾊ','ｹ','ｰ','ﾃ','ｷ','ﾋ','ﾍ','ﾑ','ﾕ','ｽ','ﾏ'];
    const numColumnsPerSide = 8;  // fewer columns per side
    const dropsPerVariant = 15;
    const variantsPerColumn = 2;

    function randDec() {
      return +(Math.random().toFixed(10));
    }

    function spawnColumn(columnIndex) {
      const column = document.createElement('div');
      column.className = 'column fade-out';
      column.style.setProperty('--r0', randDec());
      column.style.setProperty('--r1', randDec());
      column.style.setProperty('--r2', randDec());

      for (let v = 0; v < variantsPerColumn; v++) {
        const variant = document.createElement('div');
        variant.className = 'variant';

        for (let d = 0; d < dropsPerVariant; d++) {
          const drop = document.createElement('div');
          drop.className = 'drop';
          drop.textContent = kanas[Math.floor(Math.random() * kanas.length)];
          variant.appendChild(drop);
        }

        column.appendChild(variant);
      }

      setTimeout(() => {
        column.classList.add('fading');
      }, 1500);

      return column;
    }

    function createWall(sideWallElem, wallIndex) {
      for (let i = 0; i < numColumnsPerSide; i++) {
        const column = spawnColumn(i);
 
        column.style.setProperty('--r0', randDec());
        column.style.setProperty('--r1', randDec());
        column.style.setProperty('--r2', randDec());
        sideWallElem.appendChild(column);
      }
    }


    const leftWall = document.querySelector('.left-wall');
    const rightWall = document.querySelector('.right-wall');

    createWall(leftWall, 1);
    createWall(rightWall, 2);

  </script>
</body>
</html>
